function formatSeconds(e){e=parseInt(e);var o;return e>-1&&(hour=Math.floor(e/3600),min=Math.floor(e/60)%60,sec=e%60,day=parseInt(hour/24),day>0?(hour-=24*day,o=day+"day "+hour+":"):o=hour+":",min<10&&(o+="0"),o+=min+":",sec<10&&(o+="0"),o+=sec),o}$(function(){function e(e){e=e||window.event;var o=e.type,l=e.originalEvent.wheelDelta&&(e.originalEvent.wheelDelta>0?1:-1)||e.originalEvent.detail&&(e.originalEvent.detail>0?-1:1),n=0,a=0;"click"==o?(n=r.offset().top-e.pageY,a=100*(n+r.height())/$(".volumeBar .volumewrap").height()):"mousewheel"!=o&&"DOMMouseScroll"!=o||(a=100*(r.height()+l)/$(".volumeBar .volumewrap").height()),a<0&&(a=0,$(".otherControl .volume").attr("class","volume glyphicon glyphicon-volume-off")),a>50&&$(".otherControl .volume").attr("class","volume glyphicon glyphicon-volume-up"),a>0&&a<=50&&$(".otherControl .volume").attr("class","volume glyphicon glyphicon-volume-down"),a>=100&&(a=100),$(".volumewrap .progress-bar").css("height",a+"%"),t[0].volume=a/100,e.stopPropagation(),e.preventDefault()}function o(){l.toggleClass("playIcon"),t[0].paused?(t[0].play(),$(".playTip").removeClass("glyphicon-play").addClass("glyphicon-pause").fadeOut()):(t[0].pause(),$(".playTip").removeClass("glyphicon-pause").addClass("glyphicon-play").fadeIn())}var t=$("video"),l=$(".playPause"),n=$(".timebar .currentTime"),a=$(".timebar .duration"),s=$(".timebar .progress-bar"),r=$(".volumeBar .volumewrap").find(".progress-bar");t[0].volume=.4,l.on("click",function(){o()}),$(".playContent").on("click",function(){o()}).hover(function(){$(".turnoff").stop().animate({right:0},500)},function(){$(".turnoff").stop().animate({right:-40},500)}),$(document).click(function(){$(".volumeBar").hide()}),t.on("loadedmetadata",function(){a.text(formatSeconds(t[0].duration))}),t.on("timeupdate",function(){n.text(formatSeconds(t[0].currentTime)),s.css("width",100*t[0].currentTime/t[0].duration+"%")}),t.on("ended",function(){$(".playTip").removeClass("glyphicon-pause").addClass("glyphicon-play").fadeIn(),l.toggleClass("playIcon")}),$(window).keyup(function(e){e=e||window.event,32==e.keyCode&&o(),27==e.keyCode&&($(".fullScreen").removeClass("cancleScreen"),$("#willesPlay .playControll").css({bottom:-48}).removeClass("fullControll")),e.preventDefault()}),$(".fullScreen").on("click",function(){return $(this).hasClass("cancleScreen")?(document.exitFullscreen?document.exitFullscreen():document.mozExitFullScreen?document.mozExitFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),$(this).removeClass("cancleScreen"),$("#willesPlay .playControll").css({bottom:-48}).removeClass("fullControll")):(t[0].requestFullscreen?t[0].requestFullscreen():t[0].mozRequestFullScreen?t[0].mozRequestFullScreen():t[0].webkitRequestFullscreen?t[0].webkitRequestFullscreen():t[0].msRequestFullscreen&&t[0].msRequestFullscreen(),$(this).addClass("cancleScreen"),$("#willesPlay .playControll").css({left:0,bottom:0}).addClass("fullControll")),!1}),$(".volume").on("click",function(e){e=e||window.event,$(".volumeBar").toggle(),e.stopPropagation()}),$(".volumeBar").on("click mousewheel DOMMouseScroll",function(o){return o=o||window.event,e(o),o.stopPropagation(),!1}),$(".timebar .progress").mousedown(function(e){e=e||window.event,i(e.pageX)});var i=function(e){var o=t[0].duration,l=e-s.offset().left,n=100*l/$(".timebar .progress").width();n>100&&(n=100),n<0&&(n=0),s.css("width",n+"%"),t[0].currentTime=o*n/100};$(".btnLight").click(function(e){e=e||window.event,$(this).hasClass("on")?($(this).removeClass("on"),$("body").append('<div class="overlay"></div>'),$(".overlay").css({position:"absolute",width:"100%",height:$(document).height(),background:"#000",opacity:1,top:0,left:0,"z-index":999}),$(".playContent").css({"z-index":1e3}),$(".playControll").css({bottom:-48,"z-index":1e3}),$(".playContent").hover(function(){$(".playControll").stop().animate({height:48},500)},function(){setTimeout(function(){$(".playControll").stop().animate({height:0},500)},2e3)})):($(this).addClass("on"),$(".overlay").remove(),$(".playControll").css({bottom:0})),e.stopPropagation(),e.preventDefault()})});